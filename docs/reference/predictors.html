<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="patchify_df is used to generate training data. At test time, we don't need
all the patches, but we do need to construct regressors for the immediate
past. This will be matched to the model's original training data and used to
generate predictions."><title>Generate a Predictor Matrix — predictors • mbtransfer</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Open_Sans-0.4.5/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.5/font.css" rel="stylesheet"><link href="../deps/Cormorant-0.4.5/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate a Predictor Matrix — predictors"><meta property="og:description" content="patchify_df is used to generate training data. At test time, we don't need
all the patches, but we do need to construct regressors for the immediate
past. This will be matched to the model's original training data and used to
generate predictions."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">mbtransfer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/aqua.html">Modulating pH in an Aquaculture Microbiome</a>
    <a class="dropdown-item" href="../articles/diet.html">Diet Interventions as Ecological Shifts</a>
    <a class="dropdown-item" href="../articles/postpartum.html">Postpartum Community Remodeling</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Generate a Predictor Matrix</h1>
      
      <div class="d-none name"><code>predictors.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>patchify_df</code> is used to generate training data. At test time, we don't need
all the patches, but we do need to construct regressors for the immediate
past. This will be matched to the model's original training data and used to
generate predictions.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">predictors</span><span class="op">(</span><span class="va">ts_inter</span>, <span class="va">lags</span>, <span class="va">subject</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>ts_inter</dt>
<dd><p>An object of class <code>ts_inter_single</code> over which to generate
sliding windows.</p></dd>


<dt>lags</dt>
<dd><p>A vector specifying <code>P</code> and <code>Q</code> in the trained mbtransfer model.</p></dd>


<dt>subject</dt>
<dd><p>A static data frame of subject-level variables. This will be
concatenated to time-varying intervention and taxonomic covariates when
making predictions. This is analogous to the training process.</p></dd>

</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">mbtransfer</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">sim_ts</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ts</span> <span class="op">&lt;-</span> <span class="fu"><a href="subset_values.html">subset_values</a></span><span class="op">(</span><span class="va">sim_ts</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">predictors</span><span class="op">(</span><span class="va">ts</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>, <span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon1_lag2 taxon2_lag2 taxon3_lag2 taxon4_lag2 taxon5_lag2 taxon6_lag2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]    7.964213    13.65294    27.30587    26.16813    6.826468    6.826468</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon7_lag2 taxon8_lag2 taxon9_lag2 taxon10_lag2 taxon11_lag2 taxon12_lag2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]    11.37745    5.688723    38.68332            0     3.413234     13.65294</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon13_lag2 taxon14_lag2 taxon15_lag2 taxon16_lag2 taxon17_lag2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]     22.75489     6.826468     5.688723            0     13.65294</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon18_lag2 taxon19_lag2 taxon20_lag2 taxon21_lag2 taxon22_lag2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]     17.06617     4.550979     4.550979     5.688723     15.92843</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon23_lag2 taxon24_lag2 taxon25_lag2 taxon26_lag2 taxon27_lag2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]     4.550979     6.826468     5.688723      10.2397     5.688723</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon28_lag2 taxon29_lag2 taxon30_lag2 taxon31_lag2 taxon32_lag2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]     19.34166     3.413234     15.92843     18.20391     3.413234</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon33_lag2 taxon34_lag2 taxon35_lag2 taxon36_lag2 taxon37_lag2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]     19.34166     22.75489     2.275489     7.964213     13.65294</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon38_lag2 taxon39_lag2 taxon40_lag2 taxon41_lag2 taxon42_lag2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]     11.37745            0     7.964213     4.550979     21.61715</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon43_lag2 taxon44_lag2 taxon45_lag2 taxon46_lag2 taxon47_lag2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]     25.03038     26.16813     6.826468            0     9.101957</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon48_lag2 taxon49_lag2 taxon50_lag2 taxon1_lag1 taxon2_lag1 taxon3_lag1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]     6.826468     13.65294     4.550979    5.448472    4.358777    3.269083</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon4_lag1 taxon5_lag1 taxon6_lag1 taxon7_lag1 taxon8_lag1 taxon9_lag1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]    4.358777    4.358777    10.89694    8.717555    11.98664     18.5248</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon10_lag1 taxon11_lag1 taxon12_lag1 taxon13_lag1 taxon14_lag1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]     3.269083     3.269083     6.538166     9.807249     20.70419</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon15_lag1 taxon16_lag1 taxon17_lag1 taxon18_lag1 taxon19_lag1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]     15.25572     14.16603      19.6145     7.627861     13.07633</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon20_lag1 taxon21_lag1 taxon22_lag1 taxon23_lag1 taxon24_lag1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]     11.98664     5.448472     17.43511     32.69083     4.358777</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon25_lag1 taxon26_lag1 taxon27_lag1 taxon28_lag1 taxon29_lag1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]     7.627861     4.358777     1.089694     11.98664     9.807249</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon30_lag1 taxon31_lag1 taxon32_lag1 taxon33_lag1 taxon34_lag1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]     11.98664     6.538166     23.97328     15.25572     5.448472</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon35_lag1 taxon36_lag1 taxon37_lag1 taxon38_lag1 taxon39_lag1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]     4.358777     5.448472     20.70419     10.89694     13.07633</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon40_lag1 taxon41_lag1 taxon42_lag1 taxon43_lag1 taxon44_lag1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]     2.179389     3.269083     9.807249     5.448472     5.448472</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon45_lag1 taxon46_lag1 taxon47_lag1 taxon48_lag1 taxon49_lag1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]     9.807249     2.179389     14.16603     15.25572      19.6145</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon50_lag1 intervention1_lag1 intervention1_lag0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]     1.089694                  0                  0</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Kris Sankaran, Pratheepa Jeganathan.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

