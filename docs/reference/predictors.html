<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="patchify_df is used to generate training data. At test time, we don't need
all the patches, but we do need to construct regressors for the immediate
past. This will be matched to the model's original training data and used to
generate predictions."><title>Generate a Predictor Matrix — predictors • mbtransfer</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Open_Sans-0.4.7/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.7/font.css" rel="stylesheet"><link href="../deps/Cormorant-0.4.7/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate a Predictor Matrix — predictors"><meta property="og:description" content="patchify_df is used to generate training data. At test time, we don't need
all the patches, but we do need to construct regressors for the immediate
past. This will be matched to the model's original training data and used to
generate predictions."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">mbtransfer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/aqua.html">Modulating pH in an Aquaculture Microbiome</a>
    <a class="dropdown-item" href="../articles/diet.html">Diet Interventions as Ecological Shifts</a>
    <a class="dropdown-item" href="../articles/postpartum.html">Postpartum Community Remodeling</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Generate a Predictor Matrix</h1>
      
      <div class="d-none name"><code>predictors.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>patchify_df</code> is used to generate training data. At test time, we don't need
all the patches, but we do need to construct regressors for the immediate
past. This will be matched to the model's original training data and used to
generate predictions.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">predictors</span><span class="op">(</span><span class="va">ts_inter</span>, <span class="va">lags</span>, <span class="va">subject</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>ts_inter</dt>
<dd><p>An object of class <code>ts_inter_single</code> over which to generate
sliding windows.</p></dd>


<dt>lags</dt>
<dd><p>A vector specifying <code>P</code> and <code>Q</code> in the trained mbtransfer model.</p></dd>


<dt>subject</dt>
<dd><p>A static data frame of subject-level variables. This will be
concatenated to time-varying intervention and taxonomic covariates when
making predictions. This is analogous to the training process.</p></dd>

</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">sim_ts</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ts</span> <span class="op">&lt;-</span> <span class="fu"><a href="subset_values.html">subset_values</a></span><span class="op">(</span><span class="va">sim_ts</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">predictors</span><span class="op">(</span><span class="va">ts</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>, <span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon1_lag2 taxon2_lag2 taxon3_lag2 taxon4_lag2 taxon5_lag2 taxon6_lag2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]           3           3          25           7          13           1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon7_lag2 taxon8_lag2 taxon9_lag2 taxon10_lag2 taxon11_lag2 taxon12_lag2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]           6          19          14           15           21           22</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon13_lag2 taxon14_lag2 taxon15_lag2 taxon16_lag2 taxon17_lag2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]           21            5           18            8            6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon18_lag2 taxon19_lag2 taxon20_lag2 taxon21_lag2 taxon22_lag2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]            4           10            0            4           13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon23_lag2 taxon24_lag2 taxon25_lag2 taxon26_lag2 taxon27_lag2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]           21            1            7            7            6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon28_lag2 taxon29_lag2 taxon30_lag2 taxon31_lag2 taxon32_lag2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]            5            0            5            4            8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon33_lag2 taxon34_lag2 taxon35_lag2 taxon36_lag2 taxon37_lag2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]           10           10            1           11            4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon38_lag2 taxon39_lag2 taxon40_lag2 taxon41_lag2 taxon42_lag2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]            7            1            7            8            7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon43_lag2 taxon44_lag2 taxon45_lag2 taxon46_lag2 taxon47_lag2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]            2            9            7            6            7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon48_lag2 taxon49_lag2 taxon50_lag2 taxon51_lag2 taxon52_lag2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]           24           17           19           11            3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon53_lag2 taxon54_lag2 taxon55_lag2 taxon56_lag2 taxon57_lag2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]           10           32            8            5           17</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon58_lag2 taxon59_lag2 taxon60_lag2 taxon61_lag2 taxon62_lag2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]            8           14            9           17           12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon63_lag2 taxon64_lag2 taxon65_lag2 taxon66_lag2 taxon67_lag2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]            2           13            9           11           21</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon68_lag2 taxon69_lag2 taxon70_lag2 taxon71_lag2 taxon72_lag2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]            9            3           10            4            5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon73_lag2 taxon74_lag2 taxon75_lag2 taxon76_lag2 taxon77_lag2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]           16            2            3            4           16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon78_lag2 taxon79_lag2 taxon80_lag2 taxon81_lag2 taxon82_lag2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]            3            8            0           12            5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon83_lag2 taxon84_lag2 taxon85_lag2 taxon86_lag2 taxon87_lag2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]           16           12            2            6           11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon88_lag2 taxon89_lag2 taxon90_lag2 taxon91_lag2 taxon92_lag2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]            5            3            1           13            8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon93_lag2 taxon94_lag2 taxon95_lag2 taxon96_lag2 taxon97_lag2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]           31            6           31           20           16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon98_lag2 taxon99_lag2 taxon100_lag2 taxon1_lag1 taxon2_lag1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]            0           10             1           6           7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon3_lag1 taxon4_lag1 taxon5_lag1 taxon6_lag1 taxon7_lag1 taxon8_lag1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]           8          23           7          15          27          13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon9_lag1 taxon10_lag1 taxon11_lag1 taxon12_lag1 taxon13_lag1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]          15           33           11           14           12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon14_lag1 taxon15_lag1 taxon16_lag1 taxon17_lag1 taxon18_lag1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]            7           13            1           11            7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon19_lag1 taxon20_lag1 taxon21_lag1 taxon22_lag1 taxon23_lag1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]            9            5            8            1            3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon24_lag1 taxon25_lag1 taxon26_lag1 taxon27_lag1 taxon28_lag1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]            4            4            4           22           12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon29_lag1 taxon30_lag1 taxon31_lag1 taxon32_lag1 taxon33_lag1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]            0            6           14            0            2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon34_lag1 taxon35_lag1 taxon36_lag1 taxon37_lag1 taxon38_lag1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]           13           14           17           14            4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon39_lag1 taxon40_lag1 taxon41_lag1 taxon42_lag1 taxon43_lag1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]            2            7           10           16           10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon44_lag1 taxon45_lag1 taxon46_lag1 taxon47_lag1 taxon48_lag1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]           32           21            6            5            8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon49_lag1 taxon50_lag1 taxon51_lag1 taxon52_lag1 taxon53_lag1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]           12           19            4           19            5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon54_lag1 taxon55_lag1 taxon56_lag1 taxon57_lag1 taxon58_lag1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]           26           16           17            8            3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon59_lag1 taxon60_lag1 taxon61_lag1 taxon62_lag1 taxon63_lag1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]           17           26            9            7            4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon64_lag1 taxon65_lag1 taxon66_lag1 taxon67_lag1 taxon68_lag1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]           25           11            6            4           11</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon69_lag1 taxon70_lag1 taxon71_lag1 taxon72_lag1 taxon73_lag1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]            2            7           31           13           18</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon74_lag1 taxon75_lag1 taxon76_lag1 taxon77_lag1 taxon78_lag1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]           16            5           21            2           22</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon79_lag1 taxon80_lag1 taxon81_lag1 taxon82_lag1 taxon83_lag1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]           14           11            9           11            9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon84_lag1 taxon85_lag1 taxon86_lag1 taxon87_lag1 taxon88_lag1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]           10            0           12            6           12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon89_lag1 taxon90_lag1 taxon91_lag1 taxon92_lag1 taxon93_lag1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]            8           17            4           25           14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon94_lag1 taxon95_lag1 taxon96_lag1 taxon97_lag1 taxon98_lag1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]            8            9            4           15           12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      taxon99_lag1 taxon100_lag1 intervention1_lag1 intervention1_lag0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]            7            16                  0                  0</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Kris Sankaran, Pratheepa Jeganathan.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

